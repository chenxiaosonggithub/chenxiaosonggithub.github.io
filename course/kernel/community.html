<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>内核社区</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="https://chenxiaosong.com/stylesheet.css" />
</head>
<body>
<header id="title-block-header">
<!-- sign begin -->
<ul>
<li>作者: 陈孝松</li>
<li><a href="https://chenxiaosong.com/">中文主页: chenxiaosong.com</a></li>
<li><a href="https://chenxiaosong.com/en">英文主页: chenxiaosong.com/en</a></li>
<li><a href="https://chenxiaosong.com/video.html">哔哩哔哩教学视频: 陈孝松</a></li>
<li><a href="https://chenxiaosong.com/course.html">课程: chenxiaosong.com/course</a></li>
<li><a href="https://chenxiaosong.com/blog.html">博客: chenxiaosong.com/blog</a></li>
<li><a href="https://chenxiaosong.com/contribution.html">贡献: chenxiaosong.com/contribution</a></li>
<li>邮箱: <a href="mailto:chenxiaosong@chenxiaosong.com" class="email">chenxiaosong@chenxiaosong.com</a></li>
<li><a href="https://chenxiaosong.com/q.html">QQ交流群: 544216206, 点击查看群介绍</a></li>
</ul>
<!-- sign end -->
<h1 class="title">内核社区</h1>
</header>
<nav id="TOC">
<ul>
<li><a href="#内核社区"><span class="toc-section-number">1</span> 内核社区</a></li>
<li><a href="#openeuler"><span class="toc-section-number">2</span> openEuler社区</a></li>
<li><a href="#内核源码树"><span class="toc-section-number">3</span> 内核源码树</a></li>
<li><a href="#贡献linux内核社区"><span class="toc-section-number">4</span> 贡献Linux内核社区</a><ul>
<li><a href="#准备补丁"><span class="toc-section-number">4.1</span> 准备补丁</a></li>
<li><a href="#linux.dev邮箱申请"><span class="toc-section-number">4.2</span> <code>@linux.dev</code>邮箱申请</a></li>
<li><a href="#邮箱配置"><span class="toc-section-number">4.3</span> 邮箱配置</a></li>
<li><a href="#thunderbird邮件客户端"><span class="toc-section-number">4.4</span> thunderbird邮件客户端</a><ul>
<li><a href="#thunderbird安卓客户端"><span class="toc-section-number">4.4.1</span> thunderbird安卓客户端</a></li>
</ul></li>
<li><a href="#git发送邮件"><span class="toc-section-number">4.5</span> git发送邮件</a></li>
</ul></li>
</ul>
</nav>
<p><a href="https://chenxiaosong.com/course/kernel/kernel.html">点击跳转到内核课程所有目录</a>。</p>
<p><a href="https://chenxiaosong.com/course/kernel/video.html">点击这里查看配套的教学视频</a>。</p>
<h1 id="内核社区"><span class="header-section-number">1</span> 内核社区</h1>
<p>说到Linux内核，很多人可能会认为只有Linus这样的神才懂。但事实是任何人都能参与，比如我这样能力差的也参与到Linux内核社区了。可能很多人早就想贡献Linux内核了，但就是不知道怎么开始。</p>
<p>Linux内核有一个官方网站<a href="https://kernel.org/">The Linux Kernel Archives</a>，在这个网站上可以获取Linux内核源码以及<a href="https://git.kernel.org/">其他相关源码</a>。</p>
<p>Linux内核社区主要以邮件交流为主，以下是一些常用的网站:</p>
<ul>
<li><a href="https://lore.kernel.org/">邮件列表</a>: 在这里获取社区的最新动态。</li>
<li><a href="https://patchwork.kernel.org/">按模块划分的patchwork</a>: 补丁的邮件都会在这里归档。</li>
<li><a href="https://bugzilla.kernel.org/">bugzilla</a>: 上面有很多未解决的bug，想在社区提补丁可以在这上面找问题。</li>
<li><a href="https://syzkaller.appspot.com/upstream">syzbot</a>: <a href="https://github.com/google/syzkaller">谷歌的syzkaller</a>模糊测试跑出来的bug，想在社区提补丁也可以在这上面找问题。</li>
<li><a href="https://kernelnewbies.org/">kernelnewbies</a>: 适合内核初学者看的网站。</li>
<li><a href="https://lwn.net/">LWN.net</a>: Linux新闻周刊。</li>
</ul>
<h1 id="openeuler"><span class="header-section-number">2</span> openEuler社区</h1>
<p><a href="https://atomgit.com/openeuler/kernel">openEuler托管在atomgit上</a>（<a href="https://gitee.com/openeuler/kernel">以前是gitee</a>），贡献openEuler要通过提交Pull Requests。</p>
<p>CLA 协议是开源贡献协议，用于规范贡献者的权利及义务。贡献者在贡献openEuler社区前，需要<a href="https://clasign.osinfra.cn/sign/gitee_openeuler-1611298811283968340">签署CLA</a>，<a href="https://www.openeuler.org/zh/blog/2022-11-25-cla/CLA%E7%AD%BE%E7%BD%B2%E6%B5%81%E7%A8%8B.html">签署流程</a>。如果你是以公司邮箱贡献，且公司已经签了CLA，你应该选择“法人贡献者登记”；如果你是以个人邮箱贡献，选择“签署个人CLA”。注意仓库下<code>.git/config</code>或<code>~/.gitconfig</code>中的邮箱配置要求必须是签署了CLA的邮箱，用<code>git log --pretty=fuller</code>可以查看commit的邮箱。</p>
<p><a href="https://atomgit.com/openeuler/community/blob/master/sig/Kernel/%E8%A1%A5%E4%B8%81%E6%8F%90%E4%BA%A4%E8%A7%84%E8%8C%83.md">openEuler内核补丁提交规范</a> （比较老的文档<a href="https://my.oschina.net/openeuler/blog/5949607">Kernel SIG | openEuler Kernel 补丁合入规范</a>）， 可以在上游<a href="https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git">主线仓库</a>或 <a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git">stable仓库</a>路径下用 <a href="https://gitee.com/chenxiaosonggitee/blog/blob/master/course/kernel/src/script/create-openeuler-git-msg.sh">脚本<code>create-openeuler-git-msg.sh</code></a> 生成openEuler补丁需要的格式。</p>
<p>注意openEuler门禁会检查修改前后的kabi变化，如果想自己本地检查，可以对比修改前后的<code>vmlinux.symvers</code>和<code>Module.symvers</code>。</p>
<p>openEuler的LTS有kabi白名单，使用脚本<a href="https://atomgit.com/src-openeuler/kernel/blob/openEuler-24.03-LTS-SP2/check-kabi"><code>check-kabi</code></a>（注意不能使用<a href="https://atomgit.com/openeuler/kernel/blob/OLK-6.6/scripts/check-kabi">openeuler/kernel仓库的脚本</a>）对比<a href="https://atomgit.com/src-openeuler/kernel/blob/openEuler-24.03-LTS-SP2/Module.kabi_x86_64"><code>Module.kabi_x86_64</code></a>或<a href="https://atomgit.com/src-openeuler/kernel/blob/openEuler-24.03-LTS-SP2/Module.kabi_aarch64"><code>Module.kabi_aarch64</code></a>:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb1-1" title="1"><span class="ex">../src-openeuler-kernel/check-kabi</span> -k ../src-openeuler-kernel/Module.kabi_x86_64 -s kabi-build/Module.symvers</a></code></pre></div>
<h1 id="内核源码树"><span class="header-section-number">3</span> 内核源码树</h1>
<p>我们以社区最近的一个LTS（longterm support，长期维护版本）v6.6的代码来讲接下来的课程。</p>
<p>内核源码树根目录每个文件夹的描述如下（按字母顺序）:</p>
<ul>
<li><code>arch</code>: architecture的缩写，体系结构相关。我们着重介绍<code>arch/x86/</code>和<code>arch/arm64/</code>，在每个体系结构目录下，<code>boot/</code>是启动相关，<code>configs/</code>是配置相关，<code>include/</code>头文件相关，<code>mm/</code>内存管理相关，等等。</li>
<li><code>block</code>: 块设备IO层相关。</li>
<li><code>certs</code>: 认证相关。</li>
<li><code>crypto</code>: 加密API，加密、散列、压缩、校验等算法。</li>
<li><code>Documentation</code>: 文档，要多看，很有用。也可以看在线文档: https://www.kernel.org/doc/html/latest/</li>
<li><code>drivers</code>: 设备驱动程序相关。</li>
<li><code>fs</code>: 文件系统相关。我们主要介绍<code>fs/</code>目录下VFS（虚拟文件系统）相关的，还会介绍几个具体的文件系统，如<code>fs/ext2/</code>、<code>fs/xfs/</code>、<code>fs/proc/</code>、<code>fs/sysfs/</code>等，当然具体的文件系统不会介绍得很详细，只说一个大概，主要还是以VFS的讲解为主。</li>
<li><code>include</code>: 内核头文件相关。</li>
<li><code>init</code>: 内核引导和初始化相关。</li>
<li><code>io_uring</code>: 5.1版本引入的高性能异步IO框架，主要是为了加快IO密集型应用的性能。</li>
<li><code>ipc</code>: 进程间通信相关。</li>
<li><code>kernel</code>: 进程相关，包括进程管理和进程调度。</li>
<li><code>lib</code>: 可以看成是一个标准C库的子集，如<code>strlen</code>、<code>mmcpy</code>、<code>sprintf</code>等函数。</li>
<li><code>LICENSES</code>: 许可证。</li>
<li><code>mm</code>: 与体系结构无关的内存管理代码，注意与体系结构相关的代码在<code>arch/mm/</code>目录下。</li>
<li><code>net</code>: 网络子系统，如TCP/IP等网络协议的实现。</li>
<li><code>rust</code>: 内核除了C语言外采用的一门新开发语言，和C性能差不多，目前暂时主要用于驱动开发。</li>
<li><code>samples</code>: 示例代码，很好的学习资源，不要放过。</li>
<li><code>scripts</code>: 脚本文件，如<code>make menuconfig</code>、<code>make scripts_gdb</code>等都是调用这个目录下的脚本。</li>
<li><code>security</code>: 安全模块，比如复杂的<code>selinux</code>。</li>
<li><code>sound</code>: 语音子系统相关。</li>
<li><code>tools</code>: 开发工具相关。</li>
<li><code>usr</code>: 早期的用户空间代码（<code>initramfs</code>），比如有打包和压缩用的<code>cpio</code>等。注意，<code>usr</code>的全称是<code>Unix System Resources</code>，不是<code>user</code>，不是<code>user</code>，不是<code>user</code>。为什么要强调不是<code>user</code>呢，因为有太多太多的人读成了<code>user</code>，咱们专业点，读成<code>u, s, r</code>，一个单词一个单词的读。</li>
<li><code>virt</code>: 虚拟化相关，如<code>kvm</code>。</li>
</ul>
<p>上面是文件夹，接下来介绍根目录下的文件:</p>
<ul>
<li><code>COPYING</code>: 许可证。</li>
<li><code>CREDITS</code>: 贡献者。</li>
<li><code>Kbuild</code>: 内核顶层目录的<code>Kbuild</code>, 在进入子目录之前准备全局头文件并检查完整性。</li>
<li><code>Kconfig</code>: 内核配置。</li>
<li><code>MAINTAINERS</code>: 维护者名单。</li>
<li><code>Makefile</code>: 设置编译参数。</li>
<li><code>README</code>: 描述文档在哪里。</li>
</ul>
<h1 id="贡献linux内核社区"><span class="header-section-number">4</span> 贡献Linux内核社区</h1>
<h2 id="准备补丁"><span class="header-section-number">4.1</span> 准备补丁</h2>
<p>你可以通过<a href="https://bugzilla.kernel.org/">bugzilla</a>或<a href="https://syzkaller.appspot.com/upstream">syzbot</a>发现内核bug，也可以通过阅读内核代码发现bug或进行重构。 或者可以用<a href="https://gitee.com/chenxiaosonggitee/blog/tree/master/course/kernel/src/script/calc-func-lines.sh"><code>calc-func-lines.sh</code>脚本</a> 找到长函数（不容易阅读）进行重构。</p>
<p>如果是多个人一起开发的补丁，需要加上<code>Co-developed-by:</code>，顺序是先<code>Co-developed-by:</code>第二作者，然后<code>Signed-off-by:</code>第二作者，最后<code>Signed-off-by:</code>第一作者。</p>
<p>可以参考内核仓库中的补丁 ，比如<a href="https://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git/log/?qt=grep&amp;q=chenxiaosong">我提交的补丁</a> 。修改代码时要参考<a href="https://www.kernel.org/doc/html/latest/translations/zh_CN/process/coding-style.html#cn-codingstyle">Linux内核代码风格</a>。</p>
<p>脚本<a href="https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/tree/scripts/checkpatch.pl"><code>checkpatch.pl</code></a>中建议， 代码每行最多100个字符（<code>$max_line_length = 100</code>），commit message每行长度最多 75 个字符（<code>length($line) &gt; 75</code>）。</p>
<p><code>git commit</code>命令之后，使用以下命令会生成补丁文件:</p>
<pre class="shell"><code># -1 表示最后一次commit
# 如果文件名较长，可以加 --stat=300,200 显示完整路径
git format-patch -1 --stat=300,200

# 指定commit号
git format-patch --subject-prefix=&quot;PATCH next&quot; -1 &lt;commit号&gt;

# 如果是第2个版本或第3个版本，需要指定v2或v3
git format-patch --subject-prefix=&quot;PATCH v2&quot; -1

# 如果内容不变，重新发送（比如加一个抄送的人）
git format-patch --subject-prefix=&quot;PATCH resend,v2&quot; -1

# 从指定的commit号数向前3个，共生成3个补丁
git format-patch --subject-prefix=&quot;PATCH resend,v2&quot; -3 &lt;commit号&gt;

# 生成从 A 到 B 之间（不含A，含B）的所有提交的补丁
git format-patch &lt;commit-A&gt;..&lt;commit-B&gt;

# 生成补丁集
git format-patch --subject-prefix=&quot;PATCH resend,v2&quot; -3 commit号 --cover-letter
# 编辑0000-cover-letter.patch, 可参考patchwork上其他补丁的写法
vim 0000-cover-letter.patch</code></pre>
<h2 id="linux.dev邮箱申请"><span class="header-section-number">4.2</span> <code>@linux.dev</code>邮箱申请</h2>
<ul>
<li>参考<a href="https://korg.docs.kernel.org/linuxdev.html">linux.dev mailbox hosting</a></li>
</ul>
<p>发送邮件到<code>helpdesk@kernel.org</code>:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb3-1" title="1"><span class="ex">Subject</span>: chenxiaosong.chenxiaosong@linux.dev account request</a>
<a class="sourceLine" id="cb3-2" title="2"></a>
<a class="sourceLine" id="cb3-3" title="3"><span class="ex">Full</span> name: [ChenXiaoSong ChenXiaoSong]</a>
<a class="sourceLine" id="cb3-4" title="4"><span class="ex">Canonical</span> address: [chenxiaosong@kylinos.cn]</a>
<a class="sourceLine" id="cb3-5" title="5"></a>
<a class="sourceLine" id="cb3-6" title="6"><span class="ex">Reasons</span> for needing this account:</a>
<a class="sourceLine" id="cb3-7" title="7"></a>
<a class="sourceLine" id="cb3-8" title="8"><span class="ex">Emails</span> sent from the address I’m currently using are often not received by others, which greatly affects my communication with the community.</a>
<a class="sourceLine" id="cb3-9" title="9"></a>
<a class="sourceLine" id="cb3-10" title="10"><span class="ex">My</span> Linux kernel contributions:</a>
<a class="sourceLine" id="cb3-11" title="11"><span class="ex">https</span>://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/log/?qt=grep<span class="kw">&amp;</span><span class="va">q=</span>chenxiaosong</a>
<a class="sourceLine" id="cb3-12" title="12"></a>
<a class="sourceLine" id="cb3-13" title="13"><span class="ex">My</span> communication records with Kernel Mailing Lists:</a>
<a class="sourceLine" id="cb3-14" title="14"><span class="ex">https</span>://lore.kernel.org/all/?q=chenxiaosong</a></code></pre></div>
<h2 id="邮箱配置"><span class="header-section-number">4.3</span> 邮箱配置</h2>
<ul>
<li>163邮箱配置: 默认情况下，163邮箱只能在网页和网易邮箱大师登录。如果要用git通过163邮箱发送邮件则需要对163邮箱进行配置。在<a href="mail.163.com">pc端网页</a>登录163邮箱，点击“设置 –&gt; POP3/SMTP/IMAP”，开启SMTP服务，会弹出授权密码窗口，记下这个授权密码（也可以在下方新增授权密码或删除）。</li>
<li>foxmail邮箱（qq邮箱）配置: 在<a href="https://mail.qq.com/">pc端网页</a>登录foxmail邮箱，点击“Settings -&gt; Third-party Services -&gt; IMAP/SMTP”, 点击“Generate Authorization Code”生成在<code>.gitconfig</code>和<a href="https://www.thunderbird.net">thunderbird</a>中登录的密码。</li>
<li>腾讯企业邮箱配置: 登录<a href="https://exmail.qq.com/login">腾讯企业邮箱</a>个人账号（不是管理员），左上角“设置”，然后“邮箱绑定 -&gt; 客户端专用密码 -&gt; 生成新密码“，注意要记住这个密码，只会显示一次，忘记了就要重新生成密码。thunderbird中登录时的配置:
<ul>
<li>收件服务器: 协议IMAP，主机名: imap.exmail.qq.com，端口: 993（或不填），连接安全性: 自动检测。</li>
<li>发件服务器: 主机名: smtp.exmail.qq.com，端口: 465（或不填），连接安全性: 自动检测。</li>
</ul></li>
</ul>
<h2 id="thunderbird邮件客户端"><span class="header-section-number">4.4</span> thunderbird邮件客户端</h2>
<p>最新版本的<a href="https://www.thunderbird.net/">thunderbird</a>默认使用html格式发送和显示，需要更改配置，参考<a href="http://kb.mozillazine.org/Plain_text_e-mail_-_Thunderbird#Send_plain_text_messages">Plain text e-mail - Thunderbird</a>。</p>
<p>依次点击 <code>Account Settings（账户设置） -&gt; 地址簿 -&gt; Composition &amp; Addressing -&gt; Composition（编写） -&gt; 取消勾选 Compose messages in HTML format（以html格式编写消息）</code>。</p>
<p>thunderbird有个快捷键<code>k</code>，会忽略话题，不小心按下后邮件就会不再显示，可以在<code>查看 -&gt; 话题</code>里勾选<code>已忽略话题</code>，就能看到不小心按下<code>k</code>而不显示的邮件。</p>
<p>还有，不建议订阅内核任何模块的邮件列表，因为太多了，一旦订阅邮箱基本就爆了，可以在<a href="https://lore.kernel.org/">邮件列表网站</a>上选择对应的模块在线浏览， 如果需要回复，可以把邮件下载下来保存成文件，然后用thunderbird打开文件，然后就可以回复了。如果实在要订阅，可以访问 <a href="https://subspace.kernel.org/vger.kernel.org.html">vger.kernel.org</a>和<a href="http://vger.kernel.org/lkml/">linux-kernel mailing list FAQ</a>。</p>
<h3 id="thunderbird安卓客户端"><span class="header-section-number">4.4.1</span> thunderbird安卓客户端</h3>
<p><a href="https://github.com/thunderbird/thunderbird-android/releases">从github下载</a>。</p>
<p>纯文本格式和签名设置:</p>
<ul>
<li>进入 “Settings”</li>
<li>点击账户名</li>
<li>点击 “Sending mail”</li>
<li>点击 “Message Format”，选择 “Plain Text”</li>
<li>点击 “Composition defaults” 设置签名</li>
</ul>
<h2 id="git发送邮件"><span class="header-section-number">4.5</span> git发送邮件</h2>
<p>安装软件:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb4-1" title="1"><span class="fu">sudo</span> apt install git-email -y</a></code></pre></div>
<p><code>@linux.dev</code>邮箱<code>~/.gitconfig</code>:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb5-1" title="1">[<span class="ex">sendemail</span>]</a>
<a class="sourceLine" id="cb5-2" title="2">        <span class="ex">from</span> = chenxiaosong.chenxiaosong@linux.dev</a>
<a class="sourceLine" id="cb5-3" title="3">        <span class="ex">smtpserver</span> = smtp.migadu.com</a>
<a class="sourceLine" id="cb5-4" title="4">        <span class="ex">smtpuser</span> = chenxiaosong.chenxiaosong@linux.dev</a>
<a class="sourceLine" id="cb5-5" title="5">        <span class="ex">smtpencryption</span> = ssl</a>
<a class="sourceLine" id="cb5-6" title="6">        <span class="ex">smtppass</span> = 此处填写密码</a>
<a class="sourceLine" id="cb5-7" title="7">        <span class="ex">smtpserverport</span> = 465</a></code></pre></div>
<p>163邮箱<code>~/.gitconfig</code>:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb6-1" title="1">[<span class="ex">sendemail</span>]</a>
<a class="sourceLine" id="cb6-2" title="2">    <span class="ex">from</span> = your_name@163.com</a>
<a class="sourceLine" id="cb6-3" title="3">    <span class="ex">smtpserver</span> = smtp.163.com</a>
<a class="sourceLine" id="cb6-4" title="4">    <span class="ex">smtpuser</span> = your_name@163.com</a>
<a class="sourceLine" id="cb6-5" title="5">    <span class="ex">smtpencryption</span> = ssl </a>
<a class="sourceLine" id="cb6-6" title="6">    <span class="ex">smtppass</span> = 此处填写163邮箱的授权密码</a>
<a class="sourceLine" id="cb6-7" title="7">    <span class="ex">smtpserverport</span> = 994 </a></code></pre></div>
<p>foxmail(qq)邮箱<code>~/.gitconfig</code>:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb7-1" title="1">[<span class="ex">sendemail</span>]</a>
<a class="sourceLine" id="cb7-2" title="2">        <span class="ex">from</span> = your_name@foxmail.com</a>
<a class="sourceLine" id="cb7-3" title="3">        <span class="ex">smtpserver</span> = smtp.qq.com</a>
<a class="sourceLine" id="cb7-4" title="4">        <span class="ex">smtpuser</span> = your_name@foxmail.com</a>
<a class="sourceLine" id="cb7-5" title="5">        <span class="ex">smtpencryption</span> = ssl </a>
<a class="sourceLine" id="cb7-6" title="6">        <span class="ex">smtppass</span> = 此处填写qq邮箱的授权密码</a></code></pre></div>
<p>腾讯企业邮箱<code>~/.gitconfig</code>:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb8-1" title="1">[<span class="ex">sendemail</span>]</a>
<a class="sourceLine" id="cb8-2" title="2">        <span class="ex">from</span> = your_name@your_name.com</a>
<a class="sourceLine" id="cb8-3" title="3">        <span class="ex">smtpserver</span> = smtp.exmail.qq.com</a>
<a class="sourceLine" id="cb8-4" title="4">        <span class="ex">smtpuser</span> = your_name@your_name.com</a>
<a class="sourceLine" id="cb8-5" title="5">        <span class="ex">smtpencryption</span> = ssl </a>
<a class="sourceLine" id="cb8-6" title="6">        <span class="ex">smtppass</span> = 此处填写腾讯企业邮箱的授权密码</a>
<a class="sourceLine" id="cb8-7" title="7">        <span class="ex">smtpserverport</span> = 465</a></code></pre></div>
<p>获取maintainer邮箱:</p>
<pre class="shell"><code>./scripts/get_maintainer.pl file1.patch</code></pre>
<p>发送邮件:</p>
<pre class="shell"><code># --to是主送，--cc是抄送
git send-email --to=to1@example.com,to2@example.com --cc=cc1@example.com,cc2@example.com file1.patch file2.patch

# 如果补丁集只发送一部分，剩下未发送的补丁用以下选项
# 其中 identifier 是尖括号中的内容: In-Reply-To: &lt;20251027071316.3468472-1-chenxiaosong.chenxiaosong@linux.dev&gt;
git send-email ... --in-reply-to=identifier --no-thread # --suppress-cc=all</code></pre>
<p>可以使用脚本<a href="https://gitee.com/chenxiaosonggitee/blog/blob/master/course/kernel/src/script/get-maintainer-email.sh"><code>get-maintainer-email.sh</code></a>来获取邮箱:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb11-1" title="1"><span class="fu">git</span> format-patch -1 1aee9158bc97</a>
<a class="sourceLine" id="cb11-2" title="2"><span class="fu">bash</span> get-maintainer-email.sh fs/nfs/ fs/nfsd fs/nfs_common 0001-nfsd-lock_rename-needs-both-directories-to-live-on-t.patch</a></code></pre></div>
</body>
</html>
