<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>CVE-2024-46742</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <link rel="stylesheet" href="https://chenxiaosong.com/stylesheet.css" />
</head>
<body>
<header id="title-block-header">
<!-- sign begin -->
<ul>
<li>作者: 陈孝松</li>
<li><a href="https://chenxiaosong.com/">中文主页: chenxiaosong.com</a></li>
<li><a href="https://chenxiaosong.com/en">英文主页: chenxiaosong.com/en</a></li>
<li><a href="https://chenxiaosong.com/video.html">哔哩哔哩教学视频: 陈孝松</a></li>
<li><a href="https://chenxiaosong.com/course.html">课程: chenxiaosong.com/course</a></li>
<li><a href="https://chenxiaosong.com/blog.html">博客: chenxiaosong.com/blog</a></li>
<li><a href="https://chenxiaosong.com/contribution.html">贡献: chenxiaosong.com/contribution</a></li>
<li>邮箱: <a href="mailto:chenxiaosong@chenxiaosong.com" class="email">chenxiaosong@chenxiaosong.com</a></li>
<li><a href="https://chenxiaosong.com/q.html">QQ交流群: 544216206, 点击查看群介绍</a></li>
</ul>
<!-- sign end -->
<h1 class="title">CVE-2024-46742</h1>
</header>
<nav id="TOC">
<ul>
<li><a href="#问题描述"><span class="toc-section-number">1</span> 问题描述</a></li>
<li><a href="#复现"><span class="toc-section-number">2</span> 复现</a></li>
</ul>
</nav>
<p><a href="https://chenxiaosong.com/course/kernel/kernel.html">点击跳转到内核课程所有目录</a>。</p>
<p><a href="https://chenxiaosong.com/course/kernel/video.html">点击这里查看配套的教学视频</a>。</p>
<p><a href="https://nvd.nist.gov/vuln/detail/CVE-2024-46742">CVE-2024-46742</a>的修复补丁: <a href="https://lore.kernel.org/all/20240822082101.391272-3-chenxiaosong@chenxiaosong.com/"><code>4e8771a3666c8 smb/server: fix potential null-ptr-deref of lease_ctx_info in smb2_open()</code></a></p>
<h1 id="问题描述"><span class="header-section-number">1</span> 问题描述</h1>
<p>smb server的<code>smb2_open()</code>函数超过900行，是内核代码中比较长的函数之一，函数太长会让代码的维护变得困难，<code>smb2_open()</code>函数已经出现过很多问题，如引用计数泄露、空指针解引用、返回值错误等，<a href="https://nvd.nist.gov/vuln/detail/CVE-2024-46742">CVE-2024-46742</a>便是其中之一。</p>
<h1 id="复现"><span class="header-section-number">2</span> 复现</h1>
<p><a href="https://git.samba.org/?p=libsmb2.git;a=tree">libsmb2仓库</a>（<a href="https://github.com/sahlberg/libsmb2">也可以访问github上的仓库</a>）。</p>
</body>
</html>
